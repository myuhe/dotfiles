Info file: emacs-mime-ja.info,    -*-Text-*-
produced by `texinfo-format-buffer'
from file `emacs-mime-ja.texi'
using `texinfmt.el' version 2.42 of  7 Jul 2006.

INFO-DIR-SECTION Emacs
START-INFO-DIR-ENTRY
* Emacs MIME-ja: (emacs-mime-ja). Emacs MIME de/composition library (Japanese).
END-INFO-DIR-ENTRY






File: emacs-mime-ja.info, Node: Top, Next: Decoding and Viewing, Prev: (dir), Up: (dir)

Emacs MIME
**********

このマニュアルは MIME メッセージの作成と表示に使われるライブラリーを文
書化したものです。

このマニュアルは MIME のエンコード/デコード処理の振る舞いを変更したい利
用者、Emacs MIME ライブラリーがどのように動作するかをもっと詳しく知りた
い利用者、および MIME の要素を操作する関数や命令を書きたい人たちを対象
にしています。

MIME は "Multipurpose Internet Mail Extensions" の省略表記です。この標
準は多数の RFC に文書化されていて、主なものは次の通りです: RFC2045 (イ
ンターネット・メッセージの本文の書式), RFC2046 (メディアタイプ),
RFC2047 (非-ASCII テキストのためのメッセージヘッダーの拡張), RFC2048
(登録手続), RFC2049 (適合基準と事例)。MIME に準拠したソフトウェアを書こ
うと思っている人は誰でも、少なくとも RFC2045 と RFC2047 は読んでおくこ
とを強く勧めます。



このファイルは Emacs MIME インターフェースの機能を文書化したものです。

Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006,
2007, 2008, 2009 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover
     texts being "A GNU Manual", and with the Back-Cover Texts as in
     (a) below.  A copy of the license is included in the section
     entitled "GNU Free Documentation License".

     この文書を、フリーソフトウェア財団発行の GNU フリー文書利用許諾契
     約書第 1.3 版またはそれ以降の版が定める条件の下で複製、配布、ある
     いは変更することを許可します。変更不可部分は指定しません。“A GNU
     Manual”は表表紙テキスト、以下の (a) は裏表紙テキストです。この利
     用許諾契約書の複写は「GNU フリー文書利用許諾契約書」という章に含ま
     れています。

     (a) The FSF's Back-Cover Text is: "You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom."

     (a) FSF の裏表紙テキスト:「あなたにはこの GNU Manual を複製したり
     変更する自由があります。FSF からの複写の購入は GNU の開発とソフト
     ウェアの自由の促進を支援します。」



* Menu:

* Decoding and Viewing::  デコードと表示のための枠組み
* Composing::             MML; MIME パート記述用言語
* Interface Functions::   基本的な関数の抽象化
* Basic Functions::       ユーティリティーおよび基本的な解析のための関数
* Standards::             使われている RFC と作業文書の概略
* GNU Free Documentation License:: この文書の利用許諾契約書
* Index::                 関数および変数の索引



File: emacs-mime-ja.info, Node: Decoding and Viewing, Next: Composing, Prev: Top, Up: Top

デコードと表示
**************

この章は、上位階層での MIME メッセージのデコードと表示を扱います。

その主な目的は、最初に MIME の記事を解析してから、その解析の結果として
返される「ハンドル」のリストに基づいて、他のプログラムが処理を行なうこ
とができるようにすることです。

* Menu:

* Dissection::             MIME メッセージの解析
* Non-MIME::               非-MIME メッセージの解析
* Handles::                ハンドルの取り扱い
* Display::                ハンドルの表示
* Display Customization::  表示に影響を及ぼす変数
* Files and Directories::  添付ファイルの保存と命名
* New Viewers::            自分用ビューワーの書き方



File: emacs-mime-ja.info, Node: Dissection, Next: Non-MIME, Prev: Decoding and Viewing, Up: Decoding and Viewing

解体
====

`mm-dissect-buffer' は MIME 記事の解体を担当する関数です。マルチパート
のメッセージが与えられると、メッセージを再帰的に掘り下げて構造をたどり、
そのメッセージの構造を描写する MIME ハンドルの木構造を返します。



File: emacs-mime-ja.info, Node: Non-MIME, Next: Handles, Prev: Dissection, Up: Decoding and Viewing

非-MIME
=======

Gnus はいくつかの MIME ではない添付ファイルも理解します。それらは
postscript, uuencode, binhex, yenc, shar, forward, gnatsweb, pgp, diff
のようなものです。それぞれの機能は、`mm-uu-configure-list' に項目を追加
することによって無効にすることができます。例です。

     (require 'mm-uu)
     (add-to-list 'mm-uu-configure-list '(pgp-signed . disabled))

`postscript'
     ポストスクリプトのファイル。

`uu'
     Uuencode されたファイル。

`binhex'
     Binhex でエンコードされたファイル。

`yenc'
     Yenc でエンコードされたファイル。

`shar'
     Shar で作られたアーカイブ・ファイル。

`forward'
     MIME を使わずに転送されたメッセージ。

`gnatsweb'
     Gnatsweb の添付ファイル。

`pgp-signed'
     PGP で署名された平文 (clear text, ひらぶん)。

`pgp-encrypted'
     PGP で暗号化された平文 (clear text, ひらぶん)。

`pgp-key'
     PGP の公開鍵。

`emacs-sources'
     Emacs のソースコード。この項目は `mm-uu-emacs-sources-regexp' に合
     致するグループでのみ動作します。

`diff'
     パッチ。これは、コミットされたファイルの差分が自動的に送られるグルー
     プを対象にしたものです。`mm-uu-diff-groups-regexp' に合致するグルー
     プでのみ動作します。

`verbatim-marks'
     Slrn ふうの verbatim (文章を一言一句そのまま表す) 記号の対。

     (訳注: `#v+' と `#v-' の二行で囲まれたテキストを MIME パートに見立
     てます。)

`LaTeX'
     LaTeX の文献。`mm-uu-tex-groups-regexp' に合致する名前のグループで
     のみ動作します。

いくつかの MIME ではない添付は `mm-uu-extract' というフェースを使って表
示されます。ディフォルトではそれらのパートに MIME ボタンが付きません。
`K b' (`gnus-summary-display-buttonized') を使うか
`gnus-buttonized-mime-types' に `text/x-verbatim' を加えることによって、
ボタンの表示を強制することができます。*Note MIME コマンド:
(gnus-ja)MIME Commands.

(訳注: ここで唐突に `text/x-verbatim' のことが出てくるのは、フェースが
使われてボタンが付かない代表的なパートが `verbatim-marks' だからです。)



File: emacs-mime-ja.info, Node: Handles, Next: Display, Prev: Non-MIME, Up: Decoding and Viewing

ハンドル
========

MIME ハンドルは、MIME の構成要素を完全に描写するリストです。

ハンドルの要素をアクセスするために、以下のマクロを使うことができます:

`mm-handle-buffer'
     デコードされていない MIME パートの内容物を保持しているバッファーを
     返します。

`mm-handle-type'
     パートの解析された `Content-Type' を返します。

`mm-handle-encoding'
     パートの `Content-Transfer-Encoding' を返します。

`mm-handle-undisplayer'
     表示されているパートを消すことができるもの (訳注: 関数など) を (そ
     れが表示されている場合に) 返します。

`mm-handle-set-undisplayer'
     表示されているパートを消すことができるもの (訳注: 関数など) を設定
     します。

`mm-handle-disposition'
     パートの解析された `Content-Disposition' (訳注: 配置指定) を返しま
     す。

`mm-get-content-id'
     `Content-ID' で参照されるハンドル (単数または複数) を返します。



File: emacs-mime-ja.info, Node: Display, Next: Display Customization, Prev: Handles, Up: Decoding and Viewing

表示
====

表示し、消去し、保存するための関数です。

`mm-display-part'
     パートを表示します。

`mm-remove-part'
     パートを (それが表示されていたら) 消去します。

`mm-inlinable-p'
     MIME タイプがインラインで表示可能かどうかを返します。

`mm-automatic-display-p'
     MIME タイプが自動的に表示されるべきかどうかを返します。

`mm-destroy-part'
     パートによって使われているすべての資源を開放します (訳注: パートの
     表示、およびパートを解体して得た個々の部品を一時的に保持しているバッ
     ファーやファイルを消去します)。

`mm-save-part'
     パートをファイルに保存します。

`mm-pipe-part'
     パートを何かのプロセスにパイプします。

`mm-interactively-view-part'
     パートを表示するために使う mailcap の手段を利用者が入力することを
     求めて、それを使って表示します。



File: emacs-mime-ja.info, Node: Display Customization, Next: Files and Directories, Prev: Display, Up: Decoding and Viewing

表示のカスタマイズ
==================

`mm-inline-media-tests'
     これは連想リストです。鍵 (第一要素) は MIME タイプ、第二要素はパー
     トを「インライン」で (すなわち Emacs の画面に埋め込んで) 表示する
     ための関数、そして第三要素はそのパートがインラインで表示することが
     可能かどうかを調べるために `eval' (評価) される式です。

     この変数は、あるパートがインライン表示可能かどうかと、もし可能なら
     そのやり方を指定します。パートが現実にインライン表示されているかど
     うかを示すものではありません。

`mm-inlined-types'
     一方これは、上記の変数によって設定された条件を満足した場合に、イン
     ライン表示を行なうタイプを示します。これは MIME メディアタイプのリ
     ストです。(訳注: それぞれの要素は正規表現です。)

`mm-automatic-display'
     これは上記の変数が認めるタイプに限って「自動的」に表示されるタイプ
     のリストです。つまり、インライン表示が可能なパートだけが自動的に表
     示されます。

`mm-automatic-external-display'
     これは外部ビューワーで自動的に表示されるタイプのリストです。

`mm-keep-viewer-alive-types'
     これは、別の記事を選択しても外部ビューワーが kill されないメディア
     タイプのリストです。

     訳注: postscript や dvi など (変数のディフォルト値を参照のこと) の
     ように、読むのに時間がかかるかもしれないパートのタイプを含むリスト
     です。一方、これに含まれない単純な画像のパートなどは、それが含まれ
     ていた記事の表示をやめたときに、自動的に外部ビューワーが kill され
     ます。

`mm-attachment-override-types'
     いくつかの MIME エージェントは「添付ファイル」(attachment) の配置
     指定 (content-disposition) を持つパートを生成します。この変数に含
     まれる MIME タイプの場合はそんな配置指定を無視して、そのパートをイ
     ンライン表示することができるようにします。(そのパートをインライン
     表示することが可能で、私たちがそうすることを望む場合に限って、配置
     指定が無視されることに注意してください。)

`mm-discouraged-alternatives'
     `multipart/alternative' に含まれている、見たくないパートの MIME タ
     イプのリストです。メッセージの後半にあるパートが最も豊かな内容になっ
     ていると想定しているので、表示エージェントはそれを表示することになっ
     ています。しかし、利用者は代わりに他のタイプを見ることを好むかもし
     れません。このリストは、どんなタイプを最も見たくないかを指定するた
     めに使います。例えばもし `text/html' パートをぜんぜん見たくなくて、
     `text/richtext' パートはあまり見たくないということであれば、以下の
     ように宣言することができます:

          (setq mm-discouraged-alternatives
                '("text/html" "text/richtext")
                mm-automatic-display
                (remove "text/html" mm-automatic-display))

     さらに、これに `"image/.*"' を追加することは役に立つでしょう。
     Spammers は `multipart/alternative' メッセージの優先される側で画像
     を使っていることがあるので、あなたはそれ以外のパートがあることに気
     が付かないかもしれません。`gnus-buttonized-mime-types' も参照して
     ください (*Note MIME コマンド: (gnus-ja)MIME Commands.)。
     `gnus-buttonized-mime-types' に `"multipart/alternative"' を追加し
     た後では、見たい側を手で選ぶことができます。例えば、このように設定
     するれば良いでしょう:

          (setq gnus-buttonized-mime-types
                '("multipart/alternative" "multipart/signed")
                mm-discouraged-alternatives
                '("text/html" "image/.*"))

     この場合、Gnus はそのような種類の spam メッセージのために、以下の
     ようにラジオボタンを表示するでしょう:

          1.  (*) multipart/alternative  ( ) image/gif

          2.  (*) text/plain          ( ) text/html

`mm-inline-large-images'
     ウィンドウより大きなインライン画像を表示すると、Emacs はスクロール
     することができません。つまり画像の全体を見ることができないというこ
     とです。これを避けるために、ライブラリーはそれをインライン表示する
     前に画像のサイズを計って、それがウィンドウに合わない場合は、ライブ
     ラリーはそれを外部で (例えば `ImageMagick' や `xv' で) 表示します。
     この変数を `t' に設定すると、この検査をさせなくして、ライブラリー
     にすべての画像をサイズに関わりなくインラインで表示させます。

`mm-inline-override-types'
     `mm-inlined-types' は、例えばすべての `text/.*' パートをインライン
     で表示することを指示するような正規表現を含んでいるかもしれません。
     一方、インライン表示が可能だけれども添付ファイルとして扱いたいタイ
     プがあるならば、そのタイプに合致する正規表現のリストをこの変数に設
     定することによって、それを実現することができます。例えば
     `mm-inlined-types' が `text/.*' を含んでいるものとすると、この変数
     に `text/html' を含ませることによって、`text/html' パートは添付ファ
     イルとして扱われるようになります。

`mm-text-html-renderer'
     HTML を描画するために使う関数を選択します。すでに用意してある描画
     プログラムは、`w3', `w3m' (1) (*Note Display
     Customization-Footnotes::), `links', `lynx', `w3m-standalone' また
     は `html2text' のシンボル群のうちの一つを指定することによって選択
     します。もし `nil' だったら、外部ビューワーを使います。さらに関数
     (引数として MIME ハンドルが与えられて呼ばれる) を設定することもで
     きます。

`mm-inline-text-html-with-images'
     HTML メールには `<img>' タグを使った spammers (spam をばらまくやか
     ら) の卑劣な悪巧みが含まれているかもしれません。最もありそうなのは、
     あなたがそのメールを読んだことを確認するための意図があることです。
     このオプションを `nil' に設定する (それがディフォルトです) ことに
     よって、あなたの個人情報が流出するのを防ぐことができます。今のとこ
     ろ Emacs/W3 はこれを無視します。Emacs-w3m では、これが `nil' であっ
     ても、画像が埋め込まれた場所で `t' 命令を使うことによって画像を表
     示することができます。 (2) (*Note Display
     Customization-Footnotes::)

`mm-w3m-safe-url-regexp'
     安全な URL 名、すなわち HTML メールを描画するときに個人情報が流出
     しそうもない URL に合致する正規表現です (ディフォルト値は
     `\\`cid:' です)。`nil' にすると、すべての URL が安全だと判断します。
     Gnus では、これは `gnus-safe-html-newsgroups' の値に応じて上書きさ
     れます。*Note いろいろのいろいろ: (gnus-ja)Various Various.

`mm-inline-text-html-with-w3m-keymap'
     このオプションを非-`nil' に設定することによって、インライン表示さ
     れた text/html パートで emacs-w3m の命令キーを使うことができます。
     ディフォルト値は `t' です。

`mm-external-terminal-program'
     外部の端末を起動するために使われるプログラムです。

`mm-enable-external'
     外部の MIME ハンドラーを使うべきかどうかを指定します。

     `t' だったら、定義されているすべての外部の MIME ハンドラーが使われ
     ます。`nil' にすると、ファイルはディスクに保存されます
     (`mailcap-save-binary-file')。これが `ask' というシンボルだったら、
     外部の MIME ハンドラーが起動される前に尋ねられるでしょう。

     Mailcap (*Note mailcap::) を介して添付ファイルの表示を始めると、安
     全なビューワーを最も安全なオプションで使うことを試みます (添付ファ
     イルをディスクに保存して、異なる手段 (コマンドラインかダブルクリッ
     ク) でその表示を始める場合とは違います)。とにかく、必ずどんな外部
     プログラムも使わないようにしたいのであれば、この変数を `nil' か
     `ask' に設定してください。


File: emacs-mime-ja.info  Node: Display Customization-Footnotes, Up: Display Customization

(1) emacs-w3m についての詳細は
`http://emacs-w3m.namazu.org/' を見てください。

(2) `T' 命令はすべての画像を取り込みます。
`w3m-key-binding' オプションを `info' に設定した場合は、
代わりに `i' か `I' を使ってください。



File: emacs-mime-ja.info, Node: Files and Directories, Next: New Viewers, Prev: Display Customization, Up: Decoding and Viewing

ファイルとディレクトリー
========================

`mm-default-directory'
     添付ファイルを保存するための、ディフォルトのディレクトリーです。
     `nil' だったら `default-directory' を使います。

`mm-tmp-directory'
     一時ファイルを格納するためのディレクトリーです。

`mm-file-name-rewrite-functions'
     MIME パートのファイル名を書き換えるために使われる関数のリストです。
     それぞれの関数はファイル名に対して順繰りに実行されます (訳注: ある
     関数の戻り値が次の関数の引数になります)。出来合いの関数は以下の通
     りです。

     `mm-file-name-delete-control'
          すべての制御文字を消去します。

     `mm-file-name-delete-gotchas'
          欠陥があるシェルスクリプトで使われると意図しない結果を生じる
          文字、すなわち `|', `>' および `<'、加えて最初の文字として使
          われる `-' と `.' を消去します。

     `mm-file-name-delete-whitespace'
          すべての空白文字を取り除きます。

     `mm-file-name-trim-whitespace'
          先頭と末尾の空白文字を取り除きます。

     `mm-file-name-collapse-whitespace'
          複数の連続した空白文字を単一のスペース文字で置き換えます。

     `mm-file-name-replace-whitespace'
          空白文字を下線 (underscore) で置き換えます。下線がお好みでな
          ければ、他の文字を `mm-file-name-replace-whitespace' 変数に設
          定してください。

     Emacs 標準の関数である `capitalize', `downcase', `upcase' および
     `upcase-initials' も役に立つことがあるかもしれません。

`mm-path-name-rewrite-functions'
     MIME パートのフル・ファイル名を書き換えるために使われる関数のリス
     トです。これはパートを外部で表示するとき (すなわち、融通の効かない
     プログラムが、ファイルが保存された場所を見つけることができるように、
     絶対パス名を変換するため) に使われます。



File: emacs-mime-ja.info, Node: New Viewers, Prev: Files and Directories, Up: Decoding and Viewing

新しいビューワー
================

これは `text/enriched' パートをインライン表示するビューワーの例です:

     (defun mm-display-enriched-inline (handle)
       (let (text)
         (with-temp-buffer
           (mm-insert-part handle)
           (save-window-excursion
             (enriched-decode (point-min) (point-max))
             (setq text (buffer-string))))
         (mm-insert-inline handle text)))

この関数がパラメーターとして MIME ハンドルを受け取ることがわかりますね。
それは一時バッファーに作業場所を移し、パートのテキストを挿入し、そのテ
キストに何かの処理を施し、結果を覚えておいて、関数が呼ばれたときのバッ
ファーに戻ってその結果を挿入します。

ここにある二つの重要なお助け関数は `mm-insert-part' と
`mm-insert-inline' です。最初の関数は、ハンドルのテキストを現在のバッ
ファーに挿入します。これは文字セットおよびエンコーディグ (content
transfer decoding) を取り扱います。二番目の関数は、挿入しろと言ったどん
なテキストでも単に挿入しますが、テキストを手軽な方法で「表示されなくす
る」(undisplayed にする) ことができるような諸設定をも行ないます。



File: emacs-mime-ja.info, Node: Composing, Next: Interface Functions, Prev: Decoding and Viewing, Up: Top

MIME メッセージの作成
*********************

MIME メッセージの作成はうんざりする仕事だし簡単でもありません。そこで、
MML (MIME Meta Language) という言語を解析して、MIME メッセージを生成す
るための、`mml' というライブラリーが作られました。

主要なインターフェース関数は `mml-generate-mime' です。これは現在の (狭
められた) バッファーの内容物を調べて、MIME メッセージを含む文字列を返し
ます。

* Menu:

* Simple MML Example::             MML 文書の例
* MML Definition::                 すべての有効な MML 要素
* Advanced MML Example::           もう一つの MML 文書の例
* Encoding Customization::         エンコーディングに作用する変数
* Charset Translation::            MULE 文字セットから MIME 文字セットへの割り当て
* Conversion::                     MIME から MML へ、およびその逆
* Flowed text::                    ソフトおよびハード改行



File: emacs-mime-ja.info, Node: Simple MML Example, Next: MML Definition, Prev: Composing, Up: Composing

単純な MML の例
===============

`multipart/alternative' の単純な例です:

     <#multipart type=alternative>
     This is a plain text part.
     これはプレーンテキストのパートです。
     <#part type=text/enriched>
     <center>This is a centered enriched part</center>
     <center>これは中心に置かれる enriched パートです</center>
     <#/multipart>

これを `mml-generate-mime' に通すと、次のものが得られます:

     Content-Type: multipart/alternative; boundary="=-=-="

     --=-=-=
     Content-Type: text/plain; charset=iso-2022-jp

     This is a plain text part.
     これはプレーンテキストのパートです。

     --=-=-=
     Content-Type: text/enriched; charset=iso-2022-jp

     <center>This is a centered enriched part</center>
     <center>これは中心に置かれる enriched パートです</center>

     --=-=-=--

(実際には、日本語の部分は `charset=iso-2022-jp' でエンコードされたもの
になります。)



File: emacs-mime-ja.info, Node: MML Definition, Next: Advanced MML Example, Prev: Simple MML Example, Up: Composing

MML の定義
==========

MML 言語はとても単純です。SGML アプリケーションに少し似ていますが、異な
るものです。

MML の主要な概念は「パート」です。それぞれのパートを異なるタイプにした
り、異なる文字セットを使うことができます。パートは `<#part ...>' タグで
記述します。マルチパート型のパートは `<#multipart ...>' タグで始めます。
それぞれのパートは `<#/part>' タグか `<#/multipart>' タグで終端しますが、
(それらが無くても) `<#part ...>' で始まったタグは次のパートの始まりによっ
ても閉じられます。

`<#external ...>' タグというものもあります。これは
`external/message-body' 型のパートを記述するために使われます。

それぞれのタグは「parameter=値」の形式で、一つ以上のパラメーターを含む
ことができます (もちろん無いこともあります)。値をクォーテーションマーク
("...") で囲むことができますが、値が空白文字を含む場合以外は囲む必要が
ありません。したがって、`filename=/home/user/#hello$^yes' は完全に有効
です。

以下のパラメーターは MML で使われるものです。意味を持たないパラメーター
は無視されます。MML パラメーターの名前は MIME パラメーターの名前と同じ
で、括弧の中に付記してあるのは、それが使われるヘッダーです。

`type'
     パートの MIME タイプです (`Content-Type')。

`filename'
     そのパートの本体が含むことになるファイルの名前です
     (`Content-Disposition')。

`charset'
     パートの内容物をエンコードするときに使われる文字セットです
     (`Content-Type')。*Note Charset Translation::.

`name'
     パートをファイルに保存するときのファイル名を示唆するために使われる
     かもしれません (`Content-Type')。

`disposition'
     配置指定に使います。有効な値は `inline' と `attachment' です
     (`Content-Disposition')。

`encoding'
     有効な値は `7bit', `8bit', `quoted-printable' および `base64' です
     (`Content-Transfer-Encoding')。*Note Charset Translation::.

`description'
     パートの説明書きです (`Content-Description')。

`creation-date'
     パートが作成された時刻 (RFC822 形式) です (`Content-Disposition')。

`modification-date'
     パートが変更された時刻 (RFC822 形式) です (`Content-Disposition')。

`read-date'
     パートが読まれた時刻 (RFC822 形式) です (`Content-Disposition')。

`recipients'
     パートを誰宛てに暗号化/署名するかを指定します。これは To/CC を基に
     した自動検出よりも優先されます。

`sender'
     パートに署名するときの名義です。このフィールドはディフォルトの鍵が
     使われないようにするために使われます。

`size'
     パートのサイズを octet (8-bit) の単位で表します
     (`Content-Disposition')。

`sign'
     この MML のパートに、何の技術手段 (`smime', `pgp' または
     `pgpmime') で署名するかを指定します。

`encrypt'
     この MML のパートを、何の技術手段 (`smime', `pgp' または
     `pgpmime') で暗号化するかを指定します。

以下は `text/plain' のためのパラメーターです:

`format'
     テキストを整形するためのパラメーターで、有効な値は `fixed' (ディフォ
     ルト) と `flowed' です。普通はこれを手で設定しません。それは、テキ
     ストの本文が、RFC 2646 で定められた特別な方法で整形されることを必
     要とするからです。*Note Flowed text::.

以下は `application/octet-stream' のためのパラメーターです:

`type'
     パートのタイプです (`Content-Type')。これは人間が読むことを想定し
     た、非公式なものです。

以下は `message/external-body' のためのパラメーターです:

`access-type'
     ファイルを取得するための、サポートされているアクセス手段を示す語で
     す。値は `ftp', `anon-ftp', `tftp', `localfile' および
     `mailserver' のどれかです。(`Content-Type'.)

`expiration'
     ファイルが取得できなくなるかもしれない日時 (RFC822 形式) です。
     (`Content-Type'.)

`size'
     Octet (8-bit) の単位で表したファイルのサイズです。
     (`Content-Type'.)

`permission'
     有効な値は `read' と `read-write' です (`Content-Type')。

以下は `sign=smime' のためのパラメーターです:

`keyfile'
     署名する人の鍵と証明書を含んでいるファイルです。

以下は `encrypt=smime' のためのパラメーターです:

`certfile'
     受取人の証明書を含んでいるファイルです。



File: emacs-mime-ja.info, Node: Advanced MML Example, Next: Encoding Customization, Prev: MML Definition, Up: Composing

高度な MML の例
===============

複雑なマルチパート・メッセージの例です。これは `multipart/mixed' です。
多数のパートを含んでいて、その一つは `multipart/alternative' です。

     <#multipart type=mixed>
     <#part type=image/jpeg filename=~/rms.jpg disposition=inline>
     <#multipart type=alternative>
     This is a plain text part.
     これはプレーンテキストのパートです。
     <#part type=text/enriched name=enriched.txt>
     <center>This is a centered enriched part</center>
     <center>これは中心に置かれる enriched パートです</center>
     <#/multipart>
     This is a new plain text part.
     これは新しいプレーンテキストのパートです。
     <#part disposition=attachment>
     This plain text part is an attachment.
     このプレーンテキストのパートは添付ファイルです。
     <#/multipart>

そして、これが結果の MIME メッセージです:

     Content-Type: multipart/mixed; boundary="=-=-="

     --=-=-=
     Content-Type: image/jpeg
     Content-Disposition: inline; filename=rms.jpg
     Content-Transfer-Encoding: base64

     /9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRof
     Hh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/wAALCAAwADABAREA/8QAHwAA
     AQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQR
     BRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RF
     RkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ip
     qrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/9oACAEB
     AAA/AO/rifFHjldNuGsrDa0qcSSHkA+gHrXKw+LtWLrMb+RgTyhbr+HSug07xNqV9fQtZrNI
     AyiaE/NuBPOOOP0rvRNE880KOC8TbXXGCv1FPqjrF4LDR7u5L7SkTFT/ALWOP1xXgTuXfc7E
     sx6nua6rwp4IvvEM8chCxWxOdzn7wz6V9AaB4S07w9p5itow0rDLSY5Pt9K43xO66P4xs71m
     2QXiGCbA4yOVJ9+1aYORkdK434lyNH4ahCnG66VT9Nj15JFbPdX0MS43M4VQf5/yr2vSpLnw
     5ZW8dlCZ8KFXjOPX0/mK6rSPEGt3Angu44fNEReHYNvIH3TzXDeKNO8RX+kSX2ouZkicTIOc
     L+g7E810ulFjpVtv3bwgB3HJyK5L4quY/C9sVxk3ij/xx6850u7t1mtp/wDlpEw3An3Jr3Dw
     34gsbWza4nBlhC5LDsaW6+IFgupQyCF3iHH7gA7c9R9ay7zx6t7aX9jHC4smhfBkGCvHGfrm
     tLQ7hbnRrV1GPkAP1x1/Hr+Ncr8Vzjwrbf8AX6v/AKA9eQRyYlQk8Yx9K6XTNbkgia2ciSIn
     7p5Ga9Atte0LTLKO6it4i7dVRFJDcZ4PvXN+JvEMF9bILVGXJLSZ4zkjivRPDaeX4b08HOTC
     pOffmua+KkbS+GLVUGT9tT/0B68eeIpIFYjB70+OOVXyoOM9+M1eaWeCLzHPyHGO/NVWvJJm
     jQ8KGH1NfQWhXSXmh2c8eArRLwO3HSv/2Q==
     --=-=-=
     Content-Type: multipart/alternative; boundary="==-=-="

     --==-=-=
     Content-Type: text/plain; charset=iso-2022-jp

     This is a plain text part.
     これはプレーンテキストのパートです。

     --==-=-=
     Content-Type: text/enriched; charset=iso-2022-jp; name=enriched.txt

     <center>This is a centered enriched part</center>
     <center>これは中心に置かれる enriched パートです</center>

     --==-=-=--

     --=-=-=
     Content-Type: text/plain; charset=iso-2022-jp

     This is a new plain text part.
     これは新しいプレーンテキストのパートです。

     --=-=-=
     Content-Type: text/plain; charset=iso-2022-jp
     Content-Disposition: attachment

     This plain text part is an attachment.
     このプレーンテキストのパートは添付ファイルです。

     --=-=-=--

(実際には、日本語の部分は `charset=iso-2022-jp' でエンコードされたもの
になります。)



File: emacs-mime-ja.info, Node: Encoding Customization, Next: Charset Translation, Prev: Advanced MML Example, Up: Composing

エンコーディングのカスタマイズ
==============================

`mm-body-charset-encoding-alist'
     MIME 文字セットに割り当てるエンコーディングです。この変数は、例え
     ば他の要件によって特定のエンコーディングが強制されないときに、通常
     使われます (電子署名されたメッセージは 7bit エンコーディングを必要
     とします)。ディフォルト値は次の通りです。

          ((iso-2022-jp . 7bit)
           (iso-2022-jp-2 . 7bit)
           (utf-16 . base64)
           (utf-16be . base64)
           (utf-16le . base64))

     例えば ISO-8859-1 文字セットが quoted-printable でエンコードされな
     いようにしたい場合は、この変数に `(iso-8859-1 . 8bit)' を追加すれ
     ば良いでしょう。MML の `encoding' タグを使って、メッセージ毎にそれ
     で指定した値をこの変数より優先させることもできます (*Note MML
     Definition::)。

`mm-coding-system-priorities'
     送出するメッセージで使う coding system の優先度を指定します。ディ
     フォルト値は `nil' です (その場合は Emacs におけるディフォルトの優
     先順位が適用されます) が、日本語環境で Emacs を実行する場合は
     `(iso-8859-1 iso-2022-jp iso-2022-jp-2 shift_jis utf-8)' になりま
     す。値は coding system のシンボルのリストです (coding system の別
     名を使っても構いません。設定するときは `M-x
     describe-coding-system' を使って、coding system の名前が正確である
     ことを確かめてください)。例えば UTF-8 を最優先とするように Emacs
     を設定したものの、可能な場合は ISO-8859-1 でメッセージを送信するよ
     うにしたいという場合だったら、この変数を `(iso-8859-1)' にすれば良
     いでしょう。MML の `charset' タグを使って、メッセージ毎にそれで指
     定した値をこの変数より優先させることもできます (*Note MML
     Definition::)。

          訳注: 日本語環境とは `current-language-environment' 変数の値
          が `Japanese' になっている環境のことです。日本語のメッセージ
          のエンコードには伝統的に `iso-2022-jp' が使われているのに対し、
          Emacs で定められた優先順位に基づくと `euc-jp' や `shift_jis'
          などが第一候補になってしまうので、この値が `nil' ではよろしく
          ないのです。

          なお、ラテン語圏の人たちに宛てて送るメッセージが、彼らがデコー
          ドできないかもしれない `iso-2022-jp-2' などでエンコードされて
          しまうのを防ぐために、ディフォルト値の先頭に `iso-8859-1' が
          置かれています。

     ニュースグループ階層ごとに優先するべき文字セットが異なるので、
     Gnus では `mm-coding-system-priorities' の値を階層によって切り替え
     る必要があるでしょう。そのための例です:

          (add-to-list 'gnus-newsgroup-variables 'mm-coding-system-priorities)
          (setq gnus-parameters
                (nconc
                 ;; Some charsets are just examples!
                 '(("^cn\\." ;; Chinese
                    (mm-coding-system-priorities
                     '(iso-8859-1 cn-big5 chinese-iso-7bit utf-8)))
                   ("^cz\\.\\|^pl\\." ;; Central and Eastern European
                    (mm-coding-system-priorities '(iso-8859-2 utf-8)))
                   ("^de\\." ;; German language
                    (mm-coding-system-priorities '(iso-8859-1 iso-8859-15 utf-8)))
                   ("^fr\\." ;; French
                    (mm-coding-system-priorities '(iso-8859-15 iso-8859-1 utf-8)))
                   ("^fj\\." ;; Japanese
                    (mm-coding-system-priorities
                     '(iso-8859-1 iso-2022-jp iso-2022-jp-2 shift_jis utf-8)))
                   ("^ru\\." ;; Cyrillic
                    (mm-coding-system-priorities
                     '(koi8-r iso-8859-5 iso-8859-1 utf-8))))
                 gnus-parameters))

`mm-content-transfer-encoding-defaults'
     MIME のタイプに割り当てるエンコーディングです。この変数は、例えば
     他の要件によってより安全なエンコーディングが強制されないときに、通
     常使われます (電子署名されたメッセージは 7bit エンコーディングを必
     要とします)。通常の MIME エンコーディングの他に、quoted-printable
     と base64 のうちで最も効率的な方を個々の場合に使うべきであることを
     示す `qp-or-base64' を使うこともできます (訳注: `qp-or-base64' の
     実際の動作は、quoted-printable と base64 の両方でエンコードしてみ
     て、サイズが小さくなる方を採用することです)。

     `qp-or-base64' にはもう一つの効果があります。それは MIME のパート
     が MTA によって壊されないようにするために、長い行を折り畳みます。
     `quoted-printable' と `base64' もそうです。

     パートが受信したときのままの生の転送されたメッセージ (例えば、引数
     に 2 を与えた `gnus-summary-mail-forward' によって作られるもの) で
     あるか、`text/*' タイプや `message/*' ではない場合に、これが本文の
     エンコーディグに影響を及ぼすことに注意してください。それらの場合で
     さえ、MML の `encoding' タグを使って、メッセージ毎にそれで指定した
     値をこの変数より優先させることもできます (*Note MML Definition::)。

`mm-use-ultra-safe-encoding'
     これが非-`nil' である場合、本文に 76 文字よりも長い行や "From " で
     始まる行があったら、それらのテキストのパートは quoted-printable で
     エンコードされます。非-7bit エンコーディング (8bit, バイナリー) は
     一般に認められていません。この変数を `nil' 以外の値に設定しておく
     ことは、8bit を通さない MTA か MDA がメッセージを改変してしまう確
     率を下げます。これは直接に設定されるのではなく、他の関数によって
     (例えば、電子署名されるメッセージをエンコードするときに) 必要に応
     じて束縛されるべきです。



File: emacs-mime-ja.info, Node: Charset Translation, Next: Conversion, Prev: Encoding Customization, Up: Composing

文字セットの変換
================

MML を MIME に変換するときに、Emacs の内部で作られた MIME パートのそれ
ぞれについて、適切な文字セットを選ばなければなりません。

MULE 機能が無い Emacs を走らせている場合だったら、この処理は単純です。
パートがどんな非-ASCII (8-bit) 文字を含んでいても、
`mail-parse-charset' で与えられる MIME 文字セット (シンボル) を使えば良
いのです。(もっとも、この変数を直接に設定しないでください。ディフォルト
の文字セットを変更したい場合は、MIME メッセージを処理するために使うパッ
ケージの説明書を調べてください。例えば: *Note いろいろなメッセージ変数:
(message-ja)Various Message Variables.)。ASCII 文字セットしか無ければ、
US-ASCII が MIME 文字セットとして使われるのはもちろんです。

MULE 機能を備えた Emacs を走らせている場合は、ものごとは多少複雑になり
ます。この場合は、パートで使われている MULE 文字セットのリストを取得し、
Emacs 自身が提供するテーブルか、XEmacs のための
`mm-mime-mule-charset-alist' 変数の値に基づいて、それらの MULE 文字セッ
トを MIME 文字セットに変換します。結果が単一の MIME 文字セットだったら、
それを使ってパートをエンコードします。しかし、結果の MIME 文字セットの
リストが二つ以上の要素を含んでいる場合には、二つのことが起こり得ます。
もしパートを UTF-8 でエンコードすることが可能だったら、その文字セットを
使います。(このために Emacs は `utf-8' coding system をサポートしていな
ければなりません。また、そのパートを構成するすべての文字に対応するもの
が、Unicode の定義に存在していなければなりません。) 何らかの理由によっ
て UTF-8 を利用できない場合、そのパートは、それぞれが単一の MIME 文字セッ
トでエンコードすることができるように、いくつかに分割されます。もっとも、
パートは行の境界でしか分割することができないので、単一の行をエンコード
するために複数の MIME 文字セットが必要だとすると、そのパートをエンコー
ドすることは不可能です。

MULE 機能を備えた Emacs を走らせている場合、どの coding system を使うか
の優先順位は Emacs 自身から継承されます。これは、もし Emacs が UTF-8 を
優先するように設定されていると、それがメッセージのエンコードに使われる
ということです。ただし `mm-coding-system-priorities' 変数の値を変えるこ
とによって、これを変更することはできます (*Note Encoding
Customization::)。

メッセージを作成するときに MML の `charset' タグを設定することによって、
使われる文字セットをそれにすることができます。

文字列のエンコーディング (quoted-printable, 8bit など) はここでの議論と
直交する概念です。それは `mm-body-charset-encoding-alist' 変数と
`mm-content-transfer-encoding-defaults' 変数によって制御されます
(*Note Encoding Customization::)。



File: emacs-mime-ja.info, Node: Conversion, Next: Flowed text, Prev: Charset Translation, Up: Composing

変換
====

`mime-to-mml' 関数を使って MIME メッセージ (マルチパートでも可) を MML
に変換することができます。これは現在のバッファーにある MIME メッセージ
に作用して、MIME の境界を MML の印付け (markup) で置き換えます。テキス
トではないパートの内容物は、そのバッファーに置かれる代わりに MML タグを
介して参照される別のバッファーに置かれます。

`mml-to-mime' 関数を使って、逆に MML メッセージを MIME に変換することが
できます。

これらの関数が行なうことはある意味で「不可逆」(lossy) です。
`mime-to-mml' を実行し、次に `mml-to-mime' を実行すると、元とまったく同
じメッセージには戻らないでしょう。ヘッダーの順序のようなどうでも良いこ
とが違ってしまうだけでなく、それぞれのヘッダーの内容も変化してしまうか
もしれません。例えば、元のメッセージが base64 でテキストをエンコードし
てあっても、`mml-to-mime' は quoted-printable を使うかもしれない、とい
うようなことです。

しかし本質的には、これら二つは互いに逆関数であるべきです。結果として生
成されるメッセージの内容物が、同一でないにしても等価なままであるような。



File: emacs-mime-ja.info, Node: Flowed text, Prev: Conversion, Up: Composing

流動テキスト
============

Emacs MIME ライブラリーは、メッセージをエンコードするときは
`use-hard-newlines' 変数 (*Note Hard and Soft Newlines: (emacs)Hard
and Soft Newlines.) に従い、メッセージをデコードするときは
Content-Type パラメーターの“format=flowed”を尊重します。

テキストをエンコードするとき、ソフト改行文字で終端されている各行は、
`use-hard-newlines' に関わらずに `fill-flowed-encode-column' で決定され
る桁の後ろで折り畳まれて、耳を揃えられ (filled され) ます。引用の印
(`^>* ?') は尊重されます。その変数は、流動テキストをサポートしないクラ
イアントにおけるテキストの見え方を制御し、ディフォルトでは 66文字の後ろ
で折り畳みます。バッファーにハード改行文字が無ければ、流動 (flowed) テ
キストのためのエンコードは行ないません。

流動 (flowed) テキストをデコードするとき、ソフト改行文字を持つ各行は
`fill-flowed-display-column' で決定される桁の後ろで折り畳まれて耳を揃え
られ (filled され) ます。ディフォルトでは `fill-column' の後ろで折り畳
みます。

`mm-fill-flowed'
     非-`nil' だったら、format=flowed の記事は流動的に表示されます。



File: emacs-mime-ja.info, Node: Interface Functions, Next: Basic Functions, Prev: Composing, Up: Top

インターフェース関数
********************

`mail-parse' ライブラリーは、次の章で述べる実際の低レベルなライブラリー
を抽象化したものです。

標準は変化するので、プログラムも新しい鋳型に適合するために変化しなけれ
ばなりません。例えば RFC2045 は、パラメーターのリストにおいて ASCII 文
字だけを許容する `Content-Type' ヘッダーのための構文について述べていま
す。RFC2231 は、複数行に渡って継続する単一のヘッダーと非-ASCII 文字の構
成を規定するための RFC2045 の構文について詳しく記述しています。

これに対処する従来の方法は、単に新しい構文を解析するためにライブラリー
の関数を更新することでした。しかしながら、これは時には誤った行為です。
場合によっては、新しい構文と古い構文の両方を理解できるようにすることが
重要かもしれないし、ライブラリーが一つしか無い場合には、ライブラリーの
古いバージョンと新しいバージョンのどちらかを選ばなければなりません。

Emacs MIME ライブラリーは異なる方針で行くことにしました。これは、対応す
る標準に従って厳密に解析する一連の低レベルのライブラリー
(`rfc2047.el', `rfc2231.el' など) を定義します。とは言え、正規のプログ
ラムは、これらのライブラリーが直接に提供する関数ではなく、代わりに
`mail-parse' ライブラリーが提供する関数を使うべきです。このライブラリー
にある関数は、最新の低レベルのライブラリーの、対応する関数への単なる別
名です。この構成を使うことによって、プログラムはそれらが使うことができ
る首尾一貫したインターフェースを手に入れました。また、ライブラリーの開
発者は、新しい標準を扱うコードを自由に作成することができます。

以下の関数が、このライブラリーで定義されています:

`mail-header-parse-content-type'
     `Content-Type' ヘッダーを解析して、以下の形式でリストを返します:

          ("type/subtype"
           (attribute1 . value1)
           (attribute2 . value2)
           ...)

     例です:

          (mail-header-parse-content-type
           "image/gif; name=\"b980912.gif\"")
          => ("image/gif" (name . "b980912.gif"))

`mail-header-parse-content-disposition'
     `Content-Disposition' ヘッダーを解析して、上記の関数と同じ形式のリ
     ストを返します。

`mail-content-type-get'
     上記の形式のリストと属性の二つのパラメーターを受け取り、その属性の
     値を返します。

          (mail-content-type-get
           '("image/gif" (name . "b980912.gif")) 'name)
          => "b980912.gif"

`mail-header-encode-parameter'
     パラメーターに使う文字列を受け取り、それをエンコードしたものを返し
     ます。これは `Content-Type' と `Content-Disposition' のようなヘッ
     ダーに入れるパラメーターのために使われます。

`mail-header-remove-comments'
     ヘッダーからコメントを取り除いたものを返します。

          (mail-header-remove-comments
           "Gnus/5.070027 (Pterodactyl Gnus v0.27) (Finnish Landrace)")
          => "Gnus/5.070027  "

`mail-header-remove-whitespace'
     ヘッダーから“linear white space”を取り除きます。クォートされた
     ("..." で囲まれた) 文字列の中にある空白文字とコメントは保存されま
     す。

     訳注:“linear white space”とは一つ以上の空白文字のことで、その前
     に改行文字を置いたものは、長いヘッダーを折り畳むときに使われます。

          (mail-header-remove-whitespace
           "image/gif; name=\"Name with spaces\"")
          => "image/gif;name=\"Name with spaces\""

`mail-header-get-comment'
     ヘッダーの最後のコメントを返します。

          (mail-header-get-comment
           "Gnus/5.070027 (Pterodactyl Gnus v0.27) (Finnish Landrace)")
          => "Finnish Landrace"

     訳注: `Finnish Landrace' は 1998年8月23日にリリースされた XEmacs
     21.0-pre11 のコードネームです。まあ、どうでもいいことですが。

`mail-header-parse-address'
     アドレスを解析して、メールアドレスとプレーンテキストの名前を含むリ
     ストを返します。

          (mail-header-parse-address
           "Hrvoje Niksic <hniksic@srce.hr>")
          => ("hniksic@srce.hr" . "Hrvoje Niksic")

`mail-header-parse-addresses'
     アドレスのリストを含んでいる文字列を解析して、上で述べたような要素
     のリストを返します。

          (mail-header-parse-addresses
           "Hrvoje Niksic <hniksic@srce.hr>, Steinar Bang <sb@metis.no>")
          => (("hniksic@srce.hr" . "Hrvoje Niksic")
               ("sb@metis.no" . "Steinar Bang"))

`mail-header-parse-date'
     日付の文字列を解析して、Emacs 形式の時刻を返します。

`mail-narrow-to-head'
     バッファーをヘッダーの区域に狭めます。ポイントは狭められたバッファー
     の先頭に置かれます。

`mail-header-narrow-to-field'
     バッファーを現在位置の (単一の) ヘッダーに狭めます。複数行に渡って
     継続するヘッダーを理解します。

`mail-header-fold-field'
     現在位置のヘッダーを折り畳みます。

`mail-header-unfold-field'
     現在位置のヘッダーの折り畳みを解除します。

`mail-header-field-value'
     現在位置のフィールドの値を返します。

`mail-encode-encoded-word-region'
     領域にある ASCII 以外の語をエンコードします。例えば `Na,Aove' は
     `=?iso-8859-1?Q?Na=EFve?=' としてエンコードされます。

`mail-encode-encoded-word-buffer'
     現在のバッファーにある ASCII 以外の語をエンコードします。この関数
     は、ヘッダーの区域に狭められたメッセージで呼ばれることを意図してい
     ます。

`mail-encode-encoded-word-string'
     文字列に含まれているエンコードする必要がある語をエンコードして、結
     果を返します。

          (mail-encode-encoded-word-string
           "This is na,Aove, baby")
          => "This is =?iso-8859-1?Q?na=EFve,?= baby"

`mail-decode-encoded-word-region'
     領域にあるエンコードされた語をデコードします。

`mail-decode-encoded-word-string'
     文字列に含まれているエンコードされた語をデコードして、結果を返しま
     す。

          (mail-decode-encoded-word-string
           "This is =?iso-8859-1?Q?na=EFve,?= baby")
          => "This is na,Aove, baby"

現在 `mail-parse' は `ietf-drums', `rfc2047', `rfc2045' および
`rfc2231' を網羅して抽象化します。これらについて、次以降の章で説明しま
す。



File: emacs-mime-ja.info, Node: Basic Functions, Next: Standards, Prev: Interface Functions, Up: Top

基本的な関数
************

この章は、下位の階層に位置していて、解析と処理を行なうための基本的な関
数について説明します。ここで扱うことは `From' 行の解析、ヘッダーの各行
にあるコメントの削除、エンコードされた語のデコード、時刻ヘッダーの解析
などです。上位階層の機能は最初の章 (*Note Decoding and Viewing::) で扱
われています。

* Menu:

* rfc2045::      `Content-Type' ヘッダーのエンコード
* rfc2231::      `Content-Type' ヘッダーの解析
* ietf-drums::   RFC822bis で定義されているメールヘッダーの処理
* rfc2047::      ヘッダーにある語のエンコードとデコード
* time-date::    日付の解析と時刻を操作する関数
* qp::           Quoted-Printable のエンコードとデコード
* base64::       Base64 のエンコードとデコード
* binhex::       Binhex のデコード
* uudecode::     Uuencode のデコード
* yenc::         Yenc のデコード
* rfc1843::      HZ-エンコードされたテキストのデコード
* mailcap::      パートの表示の仕方は `.mailcap' ファイルに明記されている

訳注: RFC822bis == draft-ietf-drums-msg-fmt-09.txt



File: emacs-mime-ja.info, Node: rfc2045, Next: rfc2231, Prev: Basic Functions, Up: Basic Functions

rfc2045
=======

RFC2045 は「主要な」MIME の文献です。ならば、そこにはたくさんの実装があ
るだろうと想像するでしょう。しかし、ほとんどの詳細な実装はその後の RFC
に委ねられていて、そこにはありません。

と言うわけで `rfc2045.el' にはたった一つの関数があります:

`rfc2045-encode-string'
     パラメーターと値を受け取り、`PARAM=VALUE' の形式の文字列を返します。
     VALUE に安全ではない文字があったらクォートされ ("..." で囲まれ) ま
     す。



File: emacs-mime-ja.info, Node: rfc2231, Next: ietf-drums, Prev: rfc2045, Up: Basic Functions

rfc2231
=======

RFC2231 は `Content-Type' と `Content-Disposition' ヘッダーの構文を定義
します。その小粋な名称は「MIME パラメーター値と符号化単語拡張文字セット・
言語そして継続」です。

一口で言うと、それらのヘッダーはこんなふうです:

     Content-Type: application/x-stuff;
      title*0*=us-ascii'en'This%20is%20even%20more%20;
      title*1*=%2A%2A%2Afun%2A%2A%2A%20;
      title*2="isn't it!"

普通はこんなにひどくないですが。

以下の関数がこのライブラリーで定義されています:

`rfc2231-parse-string'
     `Content-Type' ヘッダーを解析して、その要素を表すリストを返します。

          (rfc2231-parse-string
           "application/x-stuff;
           title*0*=us-ascii'en'This%20is%20even%20more%20;
           title*1*=%2A%2A%2Afun%2A%2A%2A%20;
           title*2=\"isn't it!\"")
          => ("application/x-stuff"
              (title . "This is even more ***fun*** isn't it!"))

`rfc2231-get-value'
     上記の形式のリストの一つを受け取り、指定された属性の値を返します。

`rfc2231-encode-string'
     `Content-Type' と `Content-Disposition' のようなヘッダーに入れるパ
     ラメーターをエンコードします。



File: emacs-mime-ja.info, Node: ietf-drums, Next: rfc2047, Prev: rfc2231, Up: Basic Functions

ietf-drums
==========

"drums" は RFC822 の置き換え作業をしている IETF の作業部会です。

このライブラリーによって提供される関数は次の通りです:

`ietf-drums-remove-comments'
     引数からコメントを取り除いて、結果を返します。

`ietf-drums-remove-whitespace'
     文字列から“linear white space”を取り除き、結果を返します。クォー
     トされた ("..." で囲まれた) 文字列の中にある空白文字とコメントには
     手を付けません。

     訳注:“linear white space”とは一つ以上の空白文字のことで、その前
     に改行文字を置いたものは、長いヘッダーを折り畳むときに使われます。

`ietf-drums-get-comment'
     文字列の最後尾にあるコメントを返します。

`ietf-drums-parse-address'
     アドレスの文字列を解析して、メールアドレスとプレーンテキストの名前
     を含むリストを返します。

`ietf-drums-parse-addresses'
     カンマで区切られた複数のアドレスを含んでいる文字列を解析して、メー
     ルアドレスとプレーンテキストの対を含むリストを返します。

`ietf-drums-parse-date'
     日付の文字列を解析して、Emacs 形式の時刻を返します。

`ietf-drums-narrow-to-header'
     現在のバッファーをヘッダーの区域に狭めます。



File: emacs-mime-ja.info, Node: rfc2047, Next: time-date, Prev: ietf-drums, Up: Basic Functions

rfc2047
=======

RFC2047 (メッセージ・ヘッダーでの非-ASCII テキスト拡張) は、ヘッダーに
ある非-ASCII テキストをどのようにエンコードするかを定めています。実際こ
れは少々複雑になるので、このライブラリーが行なうことを調整するために、
多くの変数が必要です。

以下の変数が調整可能です:

`rfc2047-header-encoding-alist'
     これはヘッダーとエンコーディング・タイプの対を収めた連想リストです。
     その主な目的は、ある種のヘッダーがエンコードされないようにすること
     です。

     鍵 (訳注: 各要素の `car' 項) はヘッダーに合致する正規表現か `t' の
     どちらかです。

     値 (訳注: 各要素の `cdr' 項) は `nil' にすることができて、その場合、
     鍵に相当するヘッダーはエンコードされません。`mime' はそれらをエン
     コードすることを意味しますが、`address-mime' の場合はヘッダーがア
     ドレスを含んでいることを想定して注意深くエンコードします。

`rfc2047-charset-encoding-alist'
     RFC2047 は二つのエンコーディングの形式を定めています。一つは `Q'
     (Quoted-Printable のようなエンコーディング) で、もう一つは `B'
     (base64) です。この連想リストは、ある文字セットに対してどのエンコー
     ディングを使うかを規定します。

`rfc2047-encode-function-alist'
     これはエンコーディングとそれを実施するための関数の対を収めた連想リ
     ストです。エンコーディングとは `Q', `B' および `nil' のことです。

`rfc2047-encoded-word-regexp'
     デコードを行なうとき、このライブラリーはこの正規表現に合致するもの
     を探します。

`rfc2047-encoded-word-regexp-loose'
     `rfc2047-encoded-word-regexp' の Q エンコーディングのための正規表
     現を緩慢にしたバージョンです。

`rfc2047-encode-encoded-words'
     エンコード済みの語 (例えば `=?us-ascii?q?hello?=') を再度エンコード
     するかどうかを決めるブール変数です。
     `rfc2047-encoded-word-regexp' がそのような語を探すために使われます。

`rfc2047-allow-irregular-q-encoded-words'
     いい加減に Q でエンコードされた語 (例えば
     `=?us-ascii?q?hello??=') をデコードすべきかどうかを決めるブール変
     数です。それが `nil' 以外の値ならば、エンコードされた語を探すため
     に `rfc2047-encoded-word-regexp' に代わって
     `rfc2047-encoded-word-regexp-loose' が使われます。

以上は変数でした。次は関数です:

`rfc2047-narrow-to-field'
     バッファーを現在の行のヘッダーに狭めます。

`rfc2047-encode-message-header'
     メッセージのヘッダーに狭められたバッファーで使わなければなりません。
     `rfc2047-header-encoding-alist' に従ってエンコードを行ないます。

`rfc2047-encode-region'
     指定された領域にあるすべてのエンコード可能な語をエンコードします。

`rfc2047-encode-string'
     文字列をエンコードして結果を返します。

`rfc2047-decode-region'
     領域にあるエンコードされた語をデコードします。

`rfc2047-decode-string'
     文字列をデコードして結果を返します。

`rfc2047-encode-parameter'
     パラメーターを RFC2047 ふうの様式でエンコードします。これは
     `rfc2231-encode-string' の置き換えです。*Note rfc2231::.

     ファイルを MIME のパートとして添付するとき、非-ASCII 文字を含むファ
     イル名を指定するには RFC2231 のエンコーディングを使わなければなり
     ません。しかし、実際問題として多くのメールソフトがそれをサポートし
     ていないので、受信者は正しいファイル名を抽出することができません。
     代わりに RFC2047 ふうのエンコーディングが広く受け入れられています。
     そんな情けない風潮を甘受して、この関数は RFC2047 によく似たエンコー
     ディングの機能を提供します。これを使うには `~/.gnus.el' ファイルに
     次の行を入れてください:

          (defalias 'mail-header-encode-parameter 'rfc2047-encode-parameter)



File: emacs-mime-ja.info, Node: time-date, Next: qp, Prev: rfc2047, Up: Basic Functions

time-date
=========

本当は MIME ライブラリーの一部ではありませんが、ここで説明することは都
合が良いのです。これは日付ヘッダーの解析と時刻の操作を扱います。(もっと
も四次元立方体は使いません。ごめんなさい。)

これらの関数は五つの形式 (時刻の文字列、Emacs 形式の時刻、デコードされ
た時刻のリスト、秒数、および日数) の間で変換を行ないます。

時刻/日付/秒数/日数の相互変換の例です:

     (parse-time-string "Sat Sep 12 12:21:54 1998 +0200")
     => (54 21 12 12 9 1998 6 nil 7200)

     (date-to-time "Sat Sep 12 12:21:54 1998 +0200")
     => (13818 19266)

     (time-to-seconds '(13818 19266))
     => 905595714.0

     (seconds-to-time 905595714.0)
     => (13818 19266 0)

     (time-to-days '(13818 19266))
     => 729644

     (days-to-time 729644)
     => (961933 65536)

     (time-since '(13818 19266))
     => (0 430)

     (time-less-p '(13818 19266) '(13818 19145))
     => nil

     (subtract-time '(13818 19266) '(13818 19145))
     => (0 121)

     (days-between "Sat Sep 12 12:21:54 1998 +0200"
                   "Sat Sep 07 12:21:54 1998 +0200")
     => 5

     (date-leap-year-p 2000)
     => t

     (time-to-day-in-year '(13818 19266))
     => 255

     (time-to-number-of-days
      (time-since
       (date-to-time "Mon, 01 Jan 2001 02:22:26 GMT")))
     => 4.146122685185185

あと、`safe-date-to-time' というものもあります。これは `date-to-time'
と同じことをしますが、日付が構文的に不完全だった場合にゼロ時刻を返しま
す。

五つのデータは以下のように表現されます:

DATE
     RFC822 (または類似の) 形式の日付の文字列。例: `"Sat Sep 12
     12:21:54 1998 +0200"'

TIME
     Emacs の内部形式の時刻。例: `(13818 26466)'

SECONDS
     Emacs の内部形式の時刻を浮動小数で表したもの。例: `905595714.0'

DAYS
     00000101 を基点とする経過日数を整数で表したもの。例: `729644'

     訳注: 00000101 が何を意味するのか不明ですが、ソースコードによれば
     グレゴリオ歴・紀元前 (BC ではなく BCE の方の) 0001年12月31日のこと
     らしいです。

DECODED TIME
     デコードされた時刻のリスト。例: `(54 21 12 12 9 1998 6 t 7200)'

上記のすべての例は、同じ時を表しています。

関数には以下のようなものがあります:

`date-to-time'
     日付を受け取って時刻を返します。

`time-to-seconds'
     時刻を受け取って秒数を返します。Emacs にはそれを行なう組み込み関数
     `float-time' があることに注意してください。

`seconds-to-time'
     秒数を受け取って時刻を返します。

`time-to-days'
     時刻を受け取って日数を返します。

`days-to-time'
     日数を受け取って時刻を返します。

`date-to-day'
     日付を受け取って日数を返します。

`time-to-number-of-days'
     時刻を受け取って、それが表している日数を返します。

`safe-date-to-time'
     日付を受け取って時刻を返します。日付が構文的に正しくなかったら「ゼ
     ロ」時刻を返します。

`time-less-p'
     二つの時刻を受け取って、一つ目が二つ目より少ない (すなわち早い) か
     どうかを示します。

`time-since'
     時刻を受け取って、その時刻からどれほど時間が経過したかを示します。

`subtract-time'
     二つの時刻を受け取って、一つ目から二つ目を減算します。すなわち、二
     つの時刻の間の時間差を返します。

`days-between'
     二つの日付を受け取って、それら二つの日付の間の日数を返します。

`date-leap-year-p'
     年の数値を受け取って、それがうるう年かどうかを示します。

`time-to-day-in-year'
     時刻を受け取って、その年の元日から経過した日数を返します。



File: emacs-mime-ja.info, Node: qp, Next: base64, Prev: time-date, Up: Basic Functions

qp
==

このライブラリーは Quoted-Printable によるテキストのデコードとエンコー
ドを扱います。

非常に手短かに説明すれば、qp エンコーディングはすべての 8-bit 文字 (と
多くの制御文字) を `=EF' のようなもの (イコール記号と、それに続く 16進
数にエンコードされたバイト) に変換することです。

このライブラリーでは、以下の関数が定義されています:

`quoted-printable-decode-region'
     指定された領域にあるすべてのエンコードされたテキストを QP-デコード
     します。

`quoted-printable-decode-string'
     文字列に含まれている QP-エンコードされたテキストをデコードして、結
     果を返します。

`quoted-printable-encode-region'
     指定された領域にあるすべてのエンコード可能な文字を QP-エンコードし
     ます。省略できる第三引数 FOLD は、長い行を折り畳むかどうかを指定し
     ます。(ここで「長い」は 72桁を越えるもののことを意味します。)

`quoted-printable-encode-string'
     文字列に含まれているすべてのエンコード可能な文字を QP-エンコードし
     て、結果を返します。



File: emacs-mime-ja.info, Node: base64, Next: binhex, Prev: qp, Up: Basic Functions

base64
======

Base64 は 3-バイトを 4-バイトにエンコードします。そのため、約 33% サイ
ズが増えます。アルファベットだけでエンコードするので、伝送される途中で
出会うかもしれない障害に対してとても耐久力があります。

以下の関数がこのライブラリーによって定義されています:

`base64-encode-region'
     選択された領域を base64 でエンコードして、エンコードされたテキスト
     の長さを返します。省略できる第三引数 NO-LINE-BREAK は、長い行をよ
     り短い行に折り畳まないことを指図します。

`base64-encode-string'
     文字列を base64 でエンコードして結果を返します。

`base64-decode-region'
     選択された領域を base64 でデコードして、デコードされたテキストの長
     さを返します。領域がデコード可能でなかったら、`nil' を返すだけでバッ
     ファーは変更しません。

`base64-decode-string'
     文字列を base64 でデコードして結果を返します。文字列がデコード可能
     でなかったら `nil' を返します。



File: emacs-mime-ja.info, Node: binhex, Next: uudecode, Prev: base64, Up: Basic Functions

binhex
======

`binhex' はマッキントッシュの環境に源を発するエンコーディングです。以下
の関数がそれらを扱うために供給されています:

`binhex-decode-region'
     領域にあるエンコードされたテキストをデコードします。第三パラメーター
     が与えられると、`binhex' のヘッダーをデコードしてファイル名を返す
     ことだけをします。



File: emacs-mime-ja.info, Node: uudecode, Next: yenc, Prev: binhex, Up: Basic Functions

uudecode
========

`base64' がメールの世界を支配しているものの、おそらく `uuencode' はまだ
Usenet で使われているものの中で、最も普及しているバイナリーのエンコーディ
ングです。

以下の関数がこのパッケージによって供給されています:

`uudecode-decode-region'
     領域にあるテキストをデコードします。



File: emacs-mime-ja.info, Node: yenc, Next: rfc1843, Prev: uudecode, Up: Basic Functions

yenc
====

`yenc' は Usenet でバイナリーをエンコードするために使われます。以下の関
数がこのパッケージによって供給されています:

`yenc-decode-region'
     領域にあるエンコードされたテキストをデコードします。



File: emacs-mime-ja.info, Node: rfc1843, Next: mailcap, Prev: yenc, Up: Basic Functions

rfc1843
=======

RFC1843 はメッセージにおける中国語と ASCII 文字の混在文を扱います。本質
的には、RFC1843 は以下のように ASCII と中国語を切り替えるものです:

     This sentence is in ASCII.
     The next sentence is in GB.~{<:Ky2;S{#,NpJ)l6HK!#~}Bye.

まったく単純で、中国では広く使われています。

このエンコーディングを扱うために、以下の関数を使うことができます:

`rfc1843-decode-region'
     領域にある HZ-エンコードされたテキストをデコードします。

`rfc1843-decode-string'
     HZ-エンコードされた文字列をデコードして結果を返します。



File: emacs-mime-ja.info, Node: mailcap, Prev: rfc1843, Up: Basic Functions

mailcap
=======

`~/.mailcap' ファイルはほとんどの MIME に対応したメッセージ・ハンドラー
によって解析されます。それには、各要素がどのように表示されるものと想定
されているかを記述します。ファイルの例です:

     image/*; gimp -8 %s
     audio/wav; wavplayer %s
     application/msword; catdoc %s ; copiousoutput ; nametemplate=%s.doc

これは、すべての画像ファイルは `gimp' で表示されるべきであること、WAVE
音響ファイルは `wavplayer' で再生されるべきであること、そして MS-WORD
ファイルは `catdoc' によってインライン表示されるべきであると言っていま
す。

`mailcap' ライブラリーはこのファイルを解析して、合致するタイプのための
関数を提供します。

`mailcap-mime-data'
     この変数は、バックアップされた (訳注: mailcap ファイルの内容を解析
     して Emacs が扱い易い形式にした) 表示規則を含んでいる、連想リスト
     の連想リストです。

インターフェース関数:

`mailcap-parse-mailcaps'
     `~/.mailcap' ファイルを解析します。

`mailcap-mime-info'
     引数として MIME タイプを受け取り、合致するビューワーを返します。



File: emacs-mime-ja.info, Node: Standards, Next: GNU Free Documentation License, Prev: Basic Functions, Up: Top

標準
****

Emacs MIME ライブラリーは、(やや) 多くの RFC、ドラフトおよび標準ドキュ
メントに従って、様々な要素を取り扱います。この章では関連するものを列挙
します。これらはすべて `http://quimby.gnus.org/notes/' から取得可能です。

"RFC822"
"STD11"
     ARPA インターネットテキストメッセージの書式のための標準。

"RFC1036"
     USENET メッセージ交換のための標準。

"RFC2045"
     インターネットメッセージの本文の書式。

"RFC2046"
     メディアタイプ。

"RFC2047"
     メッセージヘッダーでの非-ASCII テキスト拡張。

"RFC2048"
     登録手続。

"RFC2049"
     適合基準と事例。

"RFC2231"
     MIME パラメーター値とエンコードされた単語の拡張: 文字セット、言語
     および継続。

"RFC1843"
     HZ - 中英混在文を含むファイル交換のためのデータ形式。

"draft-ietf-drums-msg-fmt-05.txt"
     RFC822 の後継のための草稿。

"RFC2112"
     MIME Multipart/Related Content-type。

"RFC1892"
     メールシステムの管理メッセージをリポートするための
     Multipart/Report Content Type。

"RFC2183"
     インターネットメッセージの情報通信表現: Content-Disposition ヘッダー
     フィールド。

"RFC2646"
     流動テキストのための text/plain 書式パラメーター。



File: emacs-mime-ja.info, Node: GNU Free Documentation License, Next: Index, Prev: Standards, Up: Top

GNU フリー文書利用許諾契約書
****************************

訳注: 非公式な日本語訳
(http://www.opensource.jp/fdl/fdl.ja.html.euc-jp) があります。

                     Version 1.3, 3 November 2008


     Copyright (C) 2000, 2001, 2002, 2007, 2008, 2009 Free Software Foundation, Inc.
     `http://fsf.org/'

     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.

  0. PREAMBLE

     The purpose of this License is to make a manual, textbook, or
     other functional and useful document "free" in the sense of
     freedom: to assure everyone the effective freedom to copy and
     redistribute it, with or without modifying it, either
     commercially or noncommercially.  Secondarily, this License
     preserves for the author and publisher a way to get credit for
     their work, while not being considered responsible for
     modifications made by others.

     This License is a kind of "copyleft", which means that derivative
     works of the document must themselves be free in the same sense.
     It complements the GNU General Public License, which is a
     copyleft license designed for free software.

     We have designed this License in order to use it for manuals for
     free software, because free software needs free documentation: a
     free program should come with manuals providing the same freedoms
     that the software does.  But this License is not limited to
     software manuals; it can be used for any textual work, regardless
     of subject matter or whether it is published as a printed book.
     We recommend this License principally for works whose purpose is
     instruction or reference.

  1. APPLICABILITY AND DEFINITIONS

     This License applies to any manual or other work, in any medium,
     that contains a notice placed by the copyright holder saying it
     can be distributed under the terms of this License.  Such a
     notice grants a world-wide, royalty-free license, unlimited in
     duration, to use that work under the conditions stated herein.
     The "Document", below, refers to any such manual or work.  Any
     member of the public is a licensee, and is addressed as "you".
     You accept the license if you copy, modify or distribute the work
     in a way requiring permission under copyright law.

     A "Modified Version" of the Document means any work containing
     the Document or a portion of it, either copied verbatim, or with
     modifications and/or translated into another language.

     A "Secondary Section" is a named appendix or a front-matter
     section of the Document that deals exclusively with the
     relationship of the publishers or authors of the Document to the
     Document's overall subject (or to related matters) and contains
     nothing that could fall directly within that overall subject.
     (Thus, if the Document is in part a textbook of mathematics, a
     Secondary Section may not explain any mathematics.)  The
     relationship could be a matter of historical connection with the
     subject or with related matters, or of legal, commercial,
     philosophical, ethical or political position regarding them.

     The "Invariant Sections" are certain Secondary Sections whose
     titles are designated, as being those of Invariant Sections, in
     the notice that says that the Document is released under this
     License.  If a section does not fit the above definition of
     Secondary then it is not allowed to be designated as Invariant.
     The Document may contain zero Invariant Sections.  If the
     Document does not identify any Invariant Sections then there are
     none.

     The "Cover Texts" are certain short passages of text that are
     listed, as Front-Cover Texts or Back-Cover Texts, in the notice
     that says that the Document is released under this License.  A
     Front-Cover Text may be at most 5 words, and a Back-Cover Text
     may be at most 25 words.

     A "Transparent" copy of the Document means a machine-readable
     copy, represented in a format whose specification is available to
     the general public, that is suitable for revising the document
     straightforwardly with generic text editors or (for images
     composed of pixels) generic paint programs or (for drawings) some
     widely available drawing editor, and that is suitable for input
     to text formatters or for automatic translation to a variety of
     formats suitable for input to text formatters.  A copy made in an
     otherwise Transparent file format whose markup, or absence of
     markup, has been arranged to thwart or discourage subsequent
     modification by readers is not Transparent.  An image format is
     not Transparent if used for any substantial amount of text.  A
     copy that is not "Transparent" is called "Opaque".

     Examples of suitable formats for Transparent copies include plain
     ASCII without markup, Texinfo input format, LaTeX input format,
     SGML or XML using a publicly available DTD, and
     standard-conforming simple HTML, PostScript or PDF designed for
     human modification.  Examples of transparent image formats
     include PNG, XCF and JPG.  Opaque formats include proprietary
     formats that can be read and edited only by proprietary word
     processors, SGML or XML for which the DTD and/or processing tools
     are not generally available, and the machine-generated HTML,
     PostScript or PDF produced by some word processors for output
     purposes only.

     The "Title Page" means, for a printed book, the title page
     itself, plus such following pages as are needed to hold, legibly,
     the material this License requires to appear in the title page.
     For works in formats which do not have any title page as such,
     Title Page" means the text near the most prominent appearance of
     the work's title, preceding the beginning of the body of the
     text.

     The "publisher" means any person or entity that distributes
     copies of the Document to the public.

     A section "Entitled XYZ" means a named subunit of the Document
     whose title either is precisely XYZ or contains XYZ in
     parentheses following text that translates XYZ in another
     language.  (Here XYZ stands for a specific section name mentioned
     below, such as "Acknowledgements", "Dedications", "Endorsements",
     or "History".)  To "Preserve the Title" of such a section when
     you modify the Document means that it remains a section "Entitled
     XYZ" according to this definition.

     The Document may include Warranty Disclaimers next to the notice
     which states that this License applies to the Document.  These
     Warranty Disclaimers are considered to be included by reference
     in this License, but only as regards disclaiming warranties: any
     other implication that these Warranty Disclaimers may have is
     void and has no effect on the meaning of this License.

  2. VERBATIM COPYING

     You may copy and distribute the Document in any medium, either
     commercially or noncommercially, provided that this License, the
     copyright notices, and the license notice saying this License
     applies to the Document are reproduced in all copies, and that
     you add no other conditions whatsoever to those of this License.
     You may not use technical measures to obstruct or control the
     reading or further copying of the copies you make or distribute.
     However, you may accept compensation in exchange for copies.  If
     you distribute a large enough number of copies you must also
     follow the conditions in section 3.

     You may also lend copies, under the same conditions stated above,
     and you may publicly display copies.

  3. COPYING IN QUANTITY

     If you publish printed copies (or copies in media that commonly
     have printed covers) of the Document, numbering more than 100,
     and the Document's license notice requires Cover Texts, you must
     enclose the copies in covers that carry, clearly and legibly, all
     these Cover Texts: Front-Cover Texts on the front cover, and
     Back-Cover Texts on the back cover.  Both covers must also
     clearly and legibly identify you as the publisher of these
     copies.  The front cover must present the full title with all
     words of the title equally prominent and visible.  You may add
     other material on the covers in addition.  Copying with changes
     limited to the covers, as long as they preserve the title of the
     Document and satisfy these conditions, can be treated as verbatim
     copying in other respects.

     If the required texts for either cover are too voluminous to fit
     legibly, you should put the first ones listed (as many as fit
     reasonably) on the actual cover, and continue the rest onto
     adjacent pages.

     If you publish or distribute Opaque copies of the Document
     numbering more than 100, you must either include a
     machine-readable Transparent copy along with each Opaque copy, or
     state in or with each Opaque copy a computer-network location
     from which the general network-using public has access to
     download using public-standard network protocols a complete
     Transparent copy of the Document, free of added material.  If you
     use the latter option, you must take reasonably prudent steps,
     when you begin distribution of Opaque copies in quantity, to
     ensure that this Transparent copy will remain thus accessible at
     the stated location until at least one year after the last time
     you distribute an Opaque copy (directly or through your agents or
     retailers) of that edition to the public.

     It is requested, but not required, that you contact the authors
     of the Document well before redistributing any large number of
     copies, to give them a chance to provide you with an updated
     version of the Document.

  4. MODIFICATIONS

     You may copy and distribute a Modified Version of the Document
     under the conditions of sections 2 and 3 above, provided that you
     release the Modified Version under precisely this License, with
     the Modified Version filling the role of the Document, thus
     licensing distribution and modification of the Modified Version
     to whoever possesses a copy of it.  In addition, you must do
     these things in the Modified Version:

       A. Use in the Title Page (and on the covers, if any) a title
          distinct from that of the Document, and from those of
          previous versions (which should, if there were any, be
          listed in the History section of the Document).  You may use
          the same title as a previous version if the original
          publisher of that version gives permission.

       B. List on the Title Page, as authors, one or more persons or
          entities responsible for authorship of the modifications in
          the Modified Version, together with at least five of the
          principal authors of the Document (all of its principal
          authors, if it has fewer than five), unless they release you
          from this requirement.

       C. State on the Title page the name of the publisher of the
          Modified Version, as the publisher.

       D. Preserve all the copyright notices of the Document.

       E. Add an appropriate copyright notice for your modifications
          adjacent to the other copyright notices.

       F. Include, immediately after the copyright notices, a license
          notice giving the public permission to use the Modified
          Version under the terms of this License, in the form shown
          in the Addendum below.

       G. Preserve in that license notice the full lists of Invariant
          Sections and required Cover Texts given in the Document's
          license notice.

       H. Include an unaltered copy of this License.

       I. Preserve the section Entitled "History", Preserve its Title,
          and add to it an item stating at least the title, year, new
          authors, and publisher of the Modified Version as given on
          the Title Page.  If there is no section Entitled "History"
          in the Document, create one stating the title, year,
          authors, and publisher of the Document as given on its Title
          Page, then add an item describing the Modified Version as
          stated in the previous sentence.

       J. Preserve the network location, if any, given in the Document
          for public access to a Transparent copy of the Document, and
          likewise the network locations given in the Document for
          previous versions it was based on.  These may be placed in
          the "History" section.  You may omit a network location for
          a work that was published at least four years before the
          Document itself, or if the original publisher of the version
          it refers to gives permission.

       K. For any section Entitled "Acknowledgements" or
          Dedications", Preserve the Title of the section, and
          preserve in the section all the substance and tone of each
          of the contributor acknowledgements and/or dedications given
          therein.

       L. Preserve all the Invariant Sections of the Document,
          unaltered in their text and in their titles.  Section
          numbers or the equivalent are not considered part of the
          section titles.

       M. Delete any section Entitled "Endorsements".  Such a section
          may not be included in the Modified Version.

       N. Do not retitle any existing section to be Entitled
          Endorsements" or to conflict in title with any Invariant
          Section.

       O. Preserve any Warranty Disclaimers.

     If the Modified Version includes new front-matter sections or
     appendices that qualify as Secondary Sections and contain no
     material copied from the Document, you may at your option
     designate some or all of these sections as invariant.  To do
     this, add their titles to the list of Invariant Sections in the
     Modified Version's license notice.  These titles must be distinct
     from any other section titles.

     You may add a section Entitled "Endorsements", provided it
     contains nothing but endorsements of your Modified Version by
     various parties--for example, statements of peer review or that
     the text has been approved by an organization as the
     authoritative definition of a standard.

     You may add a passage of up to five words as a Front-Cover Text,
     and a passage of up to 25 words as a Back-Cover Text, to the end
     of the list of Cover Texts in the Modified Version.  Only one
     passage of Front-Cover Text and one of Back-Cover Text may be
     added by (or through arrangements made by) any one entity.  If
     the Document already includes a cover text for the same cover,
     previously added by you or by arrangement made by the same entity
     you are acting on behalf of, you may not add another; but you may
     replace the old one, on explicit permission from the previous
     publisher that added the old one.

     The author(s) and publisher(s) of the Document do not by this
     License give permission to use their names for publicity for or
     to assert or imply endorsement of any Modified Version.

  5. COMBINING DOCUMENTS

     You may combine the Document with other documents released under
     this License, under the terms defined in section 4 above for
     modified versions, provided that you include in the combination
     all of the Invariant Sections of all of the original documents,
     unmodified, and list them all as Invariant Sections of your
     combined work in its license notice, and that you preserve all
     their Warranty Disclaimers.

     The combined work need only contain one copy of this License, and
     multiple identical Invariant Sections may be replaced with a
     single copy.  If there are multiple Invariant Sections with the
     same name but different contents, make the title of each such
     section unique by adding at the end of it, in parentheses, the
     name of the original author or publisher of that section if
     known, or else a unique number.  Make the same adjustment to the
     section titles in the list of Invariant Sections in the license
     notice of the combined work.

     In the combination, you must combine any sections Entitled
     History" in the various original documents, forming one section
     Entitled "History"; likewise combine any sections Entitled
     Acknowledgements", and any sections Entitled "Dedications".  You
     must delete all sections Entitled "Endorsements."

  6. COLLECTIONS OF DOCUMENTS

     You may make a collection consisting of the Document and other
     documents released under this License, and replace the individual
     copies of this License in the various documents with a single
     copy that is included in the collection, provided that you follow
     the rules of this License for verbatim copying of each of the
     documents in all other respects.

     You may extract a single document from such a collection, and
     distribute it individually under this License, provided you
     insert a copy of this License into the extracted document, and
     follow this License in all other respects regarding verbatim
     copying of that document.

  7. AGGREGATION WITH INDEPENDENT WORKS

     A compilation of the Document or its derivatives with other
     separate and independent documents or works, in or on a volume of
     a storage or distribution medium, is called an "aggregate" if the
     copyright resulting from the compilation is not used to limit the
     legal rights of the compilation's users beyond what the
     individual works permit.  When the Document is included in an
     aggregate, this License does not apply to the other works in the
     aggregate which are not themselves derivative works of the
     Document.

     If the Cover Text requirement of section 3 is applicable to these
     copies of the Document, then if the Document is less than one
     half of the entire aggregate, the Document's Cover Texts may be
     placed on covers that bracket the Document within the aggregate,
     or the electronic equivalent of covers if the Document is in
     electronic form.  Otherwise they must appear on printed covers
     that bracket the whole aggregate.

  8. TRANSLATION

     Translation is considered a kind of modification, so you may
     distribute translations of the Document under the terms of
     section 4.  Replacing Invariant Sections with translations
     requires special permission from their copyright holders, but you
     may include translations of some or all Invariant Sections in
     addition to the original versions of these Invariant Sections.
     You may include a translation of this License, and all the
     license notices in the Document, and any Warranty Disclaimers,
     provided that you also include the original English version of
     this License and the original versions of those notices and
     disclaimers.  In case of a disagreement between the translation
     and the original version of this License or a notice or
     disclaimer, the original version will prevail.

     If a section in the Document is Entitled "Acknowledgements",
     Dedications", or "History", the requirement (section 4) to
     Preserve its Title (section 1) will typically require changing
     the actual title.

  9. TERMINATION

     You may not copy, modify, sublicense, or distribute the Document
     except as expressly provided under this License.  Any attempt
     otherwise to copy, modify, sublicense, or distribute it is void,
     and will automatically terminate your rights under this License.

     However, if you cease all violation of this License, then your
     license from a particular copyright holder is reinstated (a)
     provisionally, unless and until the copyright holder explicitly
     and finally terminates your license, and (b) permanently, if the
     copyright holder fails to notify you of the violation by some
     reasonable means prior to 60 days after the cessation.

     Moreover, your license from a particular copyright holder is
     reinstated permanently if the copyright holder notifies you of
     the violation by some reasonable means, this is the first time
     you have received notice of violation of this License (for any
     work) from that copyright holder, and you cure the violation
     prior to 30 days after your receipt of the notice.

     Termination of your rights under this section does not terminate
     the licenses of parties who have received copies or rights from
     you under this License.  If your rights have been terminated and
     not permanently reinstated, receipt of a copy of some or all of
     the same material does not give you any rights to use it.

 10. FUTURE REVISIONS OF THIS LICENSE

     The Free Software Foundation may publish new, revised versions
     of the GNU Free Documentation License from time to time.  Such new
     versions will be similar in spirit to the present version, but may
     differ in detail to address new problems or concerns.  See
     `http://www.gnu.org/copyleft/'.

     Each version of the License is given a distinguishing version
     number.  If the Document specifies that a particular numbered
     version of this License "or any later version" applies to it, you
     have the option of following the terms and conditions either of
     that specified version or of any later version that has been
     published (not as a draft) by the Free Software Foundation.  If
     the Document does not specify a version number of this License,
     you may choose any version ever published (not as a draft) by the
     Free Software Foundation.  If the Document specifies that a proxy
     can decide which future versions of this License can be used,
     that proxy's public statement of acceptance of a version
     permanently authorizes you to choose that version for the
     Document.

 11. RELICENSING

     "Massive Multiauthor Collaboration Site" (or "MMC Site") means
     any World Wide Web server that publishes copyrightable works and
     also provides prominent facilities for anybody to edit those
     works.  A public wiki that anybody can edit is an example of such
     a server.  A "Massive Multiauthor Collaboration" (or "MMC")
     contained in the site means any set of copyrightable works thus
     published on the MMC site.

     "CC-BY-SA" means the Creative Commons Attribution-Share Alike 3.0
     license published by Creative Commons Corporation, a
     not-for-profit corporation with a principal place of business in
     San Francisco, California, as well as future copyleft versions of
     that license published by that same organization.

     "Incorporate" means to publish or republish a Document, in whole
     or in part, as part of another Document.

     An MMC is "eligible for relicensing" if it is licensed under this
     License, and if all works that were first published under this
     License somewhere other than this MMC, and subsequently
     incorporated in whole or in part into the MMC, (1) had no cover
     texts or invariant sections, and (2) were thus incorporated prior
     to November 1, 2008.

     The operator of an MMC Site may republish an MMC contained in the
     site under CC-BY-SA on the same site at any time before August 1,
     2009, provided the MMC is eligible for relicensing.



ADDENDUM: How to use this License for your documents
====================================================

To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

       Copyright (C)  YEAR  YOUR NAME.
       Permission is granted to copy, distribute and/or modify this document
       under the terms of the GNU Free Documentation License, Version 1.3
       or any later version published by the Free Software Foundation;
       with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
       Texts.  A copy of the license is included in the section entitled "GNU
       Free Documentation License".

If you have Invariant Sections, Front-Cover Texts and Back-Cover
Texts, replace the "with...Texts." line with this:

         with the Invariant Sections being LIST THEIR TITLES, with
         the Front-Cover Texts being LIST, and with the Back-Cover Texts
         being LIST.

If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License, to
permit their use in free software.




File: emacs-mime-ja.info, Node: Index, Prev: GNU Free Documentation License, Up: Top

Index
*****

* Menu:

* Apple:                        binhex.                 (line   5)
* Chinese:                      rfc1843.                (line   5)
* Composing:                    Composing.              (line   5)
* HZ:                           rfc1843.                (line   5)
* LaTeX:                        Non-MIME.               (line  74)
* MIME Composing:               Composing.              (line   5)
* MIME Meta Language:           Composing.              (line   5)
* MML:                          Composing.              (line   5)
* MULE:                         Charset Translation.    (line  18)
* Macintosh:                    binhex.                 (line   5)
* UTF-8:                        Charset Translation.    (line  18)
* Unicode:                      Charset Translation.    (line  18)
* base64:                       base64.                 (line   5)
* base64-decode-region:         base64.                 (line  24)
* base64-decode-string:         base64.                 (line  30)
* base64-encode-region:         base64.                 (line  14)
* base64-encode-string:         base64.                 (line  20)
* binhex:                       Non-MIME.               (line  24)
* binhex:                       binhex.                 (line   5)
* binhex-decode-region:         binhex.                 (line  11)
* charsets:                     Charset Translation.    (line   5)
* diff:                         Non-MIME.               (line  61)
* emacs-sources:                Non-MIME.               (line  56)
* format=flowed:                Flowed text.            (line   5)
* forward:                      Non-MIME.               (line  36)
* gnatsweb:                     Non-MIME.               (line  40)
* ietf-drums-get-comment:       ietf-drums.             (line  25)
* ietf-drums-narrow-to-header:  ietf-drums.             (line  43)
* ietf-drums-parse-address:     ietf-drums.             (line  29)
* ietf-drums-parse-addresses:   ietf-drums.             (line  34)
* ietf-drums-parse-date:        ietf-drums.             (line  39)
* ietf-drums-remove-comments:   ietf-drums.             (line  12)
* ietf-drums-remove-whitespace: ietf-drums.             (line  16)
* interface functions:          Interface Functions.    (line   5)
* mail-content-type-get:        Interface Functions.    (line  55)
* mail-decode-encoded-word-region: Interface Functions.  (line 167)
* mail-decode-encoded-word-string: Interface Functions.  (line 171)
* mail-encode-encoded-word-buffer: Interface Functions.  (line 152)
* mail-encode-encoded-word-region: Interface Functions.  (line 147)
* mail-encode-encoded-word-string: Interface Functions.  (line 158)
* mail-header-encode-parameter: Interface Functions.    (line  64)
* mail-header-field-value:      Interface Functions.    (line 143)
* mail-header-fold-field:       Interface Functions.    (line 135)
* mail-header-get-comment:      Interface Functions.    (line  91)
* mail-header-narrow-to-field:  Interface Functions.    (line 130)
* mail-header-parse-address:    Interface Functions.    (line 102)
* mail-header-parse-addresses:  Interface Functions.    (line 111)
* mail-header-parse-content-disposition: Interface Functions.  (line  50)
* mail-header-parse-content-type: Interface Functions.  (line  35)
* mail-header-parse-date:       Interface Functions.    (line 121)
* mail-header-remove-comments:  Interface Functions.    (line  70)
* mail-header-remove-whitespace: Interface Functions.   (line  78)
* mail-header-unfold-field:     Interface Functions.    (line 139)
* mail-narrow-to-head:          Interface Functions.    (line 125)
* mail-parse:                   Interface Functions.    (line   5)
* mail-parse-charset:           Charset Translation.    (line   9)
* mailcap-mime-data:            mailcap.                (line  24)
* mailcap-parse-mailcaps:       mailcap.                (line  31)
* mime-to-mml:                  Conversion.             (line   6)
* mm-attachment-override-types: Display Customization.  (line  46)
* mm-automatic-display:         Display Customization.  (line  25)
* mm-automatic-display-p:       Display.                (line  22)
* mm-automatic-external-display: Display Customization.  (line  31)
* mm-body-charset-encoding-alist: Encoding Customization.  (line   8)
* mm-coding-system-priorities:  Encoding Customization.  (line  27)
* mm-content-transfer-encoding-defaults: Encoding Customization.  (line  80)
* mm-default-directory:         Files and Directories.  (line   8)
* mm-destroy-part:              Display.                (line  26)
* mm-discouraged-alternatives:  Display Customization.  (line  55)
* mm-display-part:              Display.                (line  10)
* mm-enable-external:           Display Customization.  (line 153)
* mm-external-terminal-program: Display Customization.  (line 149)
* mm-file-name-collapse-whitespace: Files and Directories.  (line  42)
* mm-file-name-delete-control:  Files and Directories.  (line  24)
* mm-file-name-delete-gotchas:  Files and Directories.  (line  28)
* mm-file-name-delete-whitespace: Files and Directories.  (line  34)
* mm-file-name-replace-whitespace: Files and Directories.  (line  46)
* mm-file-name-replace-whitespace: Files and Directories.  (line  46)
* mm-file-name-rewrite-functions: Files and Directories.  (line  17)
* mm-file-name-trim-whitespace: Files and Directories.  (line  38)
* mm-fill-flowed:               Flowed text.            (line  26)
* mm-handle-buffer:             Handles.                (line  12)
* mm-handle-disposition:        Handles.                (line  35)
* mm-handle-encoding:           Handles.                (line  21)
* mm-handle-set-undisplayer:    Handles.                (line  30)
* mm-handle-type:               Handles.                (line  17)
* mm-handle-undisplayer:        Handles.                (line  25)
* mm-inlinable-p:               Display.                (line  18)
* mm-inline-large-images:       Display Customization.  (line  92)
* mm-inline-media-tests:        Display Customization.  (line   8)
* mm-inline-override-types:     Display Customization.  (line 102)
* mm-inline-text-html-with-images: Display Customization.  (line 123)
* mm-inline-text-html-with-w3m-keymap: Display Customization.  (line 143)
* mm-inlined-types:             Display Customization.  (line  19)
* mm-interactively-view-part:   Display.                (line  40)
* mm-keep-viewer-alive-types:   Display Customization.  (line  35)
* mm-mime-mule-charset-alist:   Charset Translation.    (line  18)
* mm-path-name-rewrite-functions: Files and Directories.  (line  49)
* mm-pipe-part:                 Display.                (line  36)
* mm-remove-part:               Display.                (line  14)
* mm-save-part:                 Display.                (line  32)
* mm-text-html-renderer:        Display Customization.  (line 113)
* mm-tmp-directory:             Files and Directories.  (line  13)
* mm-use-ultra-safe-encoding:   Encoding Customization.  (line 102)
* mm-uu-configure-list:         Non-MIME.               (line   5)
* mm-uu-diff-groups-regexp:     Non-MIME.               (line  61)
* mm-uu-emacs-sources-regexp:   Non-MIME.               (line  56)
* mm-uu-extract:                Non-MIME.               (line  63)
* mm-w3m-safe-url-regexp:       Display Customization.  (line 135)
* mml-generate-mime:            Composing.              (line  10)
* mml-to-mime:                  Conversion.             (line  12)
* pgp-encrypted:                Non-MIME.               (line  48)
* pgp-key:                      Non-MIME.               (line  52)
* pgp-signed:                   Non-MIME.               (line  44)
* postscript:                   Non-MIME.               (line  16)
* quoted-printable-decode-region: qp.                   (line  17)
* quoted-printable-decode-string: qp.                   (line  22)
* quoted-printable-encode-region: qp.                   (line  27)
* quoted-printable-encode-string: qp.                   (line  33)
* rfc1843:                      rfc1843.                (line   5)
* rfc2045-encode-string:        rfc2045.                (line  14)
* rfc2047-allow-irregular-q-encoded-words: rfc2047.     (line  57)
* rfc2047-charset-encoding-alist: rfc2047.              (line  29)
* rfc2047-decode-region:        rfc2047.                (line  77)
* rfc2047-decode-string:        rfc2047.                (line  81)
* rfc2047-encode-encoded-words: rfc2047.                (line  51)
* rfc2047-encode-function-alist: rfc2047.               (line  36)
* rfc2047-encode-message-header: rfc2047.               (line  64)
* rfc2047-encode-parameter:     rfc2047.                (line  85)
* rfc2047-encode-region:        rfc2047.                (line  69)
* rfc2047-encode-string:        rfc2047.                (line  73)
* rfc2047-encoded-word-regexp-loose: rfc2047.           (line  46)
* rfc2047-encoded-word-regexp:  rfc2047.                (line  41)
* rfc2047-header-encoding-alist: rfc2047.               (line  15)
* rfc2047-narrow-to-field:      rfc2047.                (line  60)
* rfc2231-encode-string:        rfc2231.                (line  39)
* rfc2231-get-value:            rfc2231.                (line  35)
* rfc2231-parse-string:         rfc2231.                (line  23)
* shar:                         Non-MIME.               (line  32)
* text/x-verbatim:              Non-MIME.               (line  63)
* uu:                           Non-MIME.               (line  20)
* uudecode-decode-region:       uudecode.               (line  14)
* uudecode:                     uudecode.               (line   5)
* uuencode:                     uudecode.               (line   5)
* verbatim-marks:               Non-MIME.               (line  67)
* yenc:                         Non-MIME.               (line  28)
* yenc-decode-region:           yenc.                   (line  11)
* yenc:                         yenc.                   (line   5)

Tag table:
Node: Top313
Node: Decoding and Viewing2369
Node: Dissection2902
Node: Non-MIME3151
Node: Handles4686
Node: Display5398
Node: Display Customization6037
Node: Files and Directories11248
Node: New Viewers12622
Node: Composing13477
Node: Simple MML Example14210
Node: MML Definition15096
Node: Advanced MML Example17977
Node: Encoding Customization21064
Node: Charset Translation25233
Node: Conversion26922
Node: Flowed text27628
Node: Interface Functions28406
Node: Basic Functions32761
Node: rfc204533581
Node: rfc223133968
Node: ietf-drums34972
Node: rfc204735811
Node: time-date38297
Node: qp40875
Node: base6441587
Node: binhex42245
Node: uudecode42541
Node: yenc42825
Node: rfc184343051
Node: mailcap43521
Node: Standards44292
Node: GNU Free Documentation License45219
Node: Index70446

End tag table
